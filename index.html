<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <script>
    // SPP Redirect Logic: é‡å° Zeabur èˆŠç¶²åŸŸçš„è‡ªå‹•å°èˆª
    (function () {
      if (window.location.hostname.includes('zeabur.app')) {
        var newUrl = 'https://boom.sppfoundry.co' + window.location.pathname + window.location.search;
        window.location.replace(newUrl);
      }
    })();
  </script>
  <meta charset="UTF-8">

  <!-- æœ€ä½³ UXï¼šå…è¨±ç¸®æ”¾ + æ”¯æ´ç€æµ· -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <title>2026 æ–°å¹´ç¥ç¦ç”¢ç”Ÿå™¨ | è·¨å¹´è³€è©ã€å‰µæ„æ–‡æ¡ˆä¸€éµç”Ÿæˆ - BOOM!</title>

  <!-- Google Analytics GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-LL0NK4ZD78"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    // é¡¯å¼å¸¶ page_locationï¼Œé¿å…æŸäº› in-app browser é¡¯ç¤ºä¸ä¸€è‡´
    gtag('config', 'G-LL0NK4ZD78', { page_location: window.location.href });
  </script>

  <!-- SEO / ç¤¾ç¾¤é è¦½ -->
  <meta name="description" content="é‚„åœ¨ç…©æƒ± 2026 æ–°å¹´ç¥ç¦è¦å‚³ä»€éº¼ï¼Ÿé€™æ¬¾ç”¢ç”Ÿå™¨æä¾› 300+ å¥å‰µæ„è·¨å¹´è³€è©ï¼ç„¡è«–æ˜¯çµ¦æ›–æ˜§å°è±¡ã€è€é—†é‚„æ˜¯å‰ä»»ï¼Œä¸€éµç”Ÿæˆä¸å°·å°¬çš„ç¥ç¦æ–‡æ¡ˆã€‚">
  <meta name="keywords" content="2026æ–°å¹´ç¥ç¦, è·¨å¹´è³€è©, ç¥ç¦èªç”¢ç”Ÿå™¨, å‰µæ„æ–‡æ¡ˆ, ç½é ­ç°¡è¨Š, BOOM">

  <meta property="og:type" content="website">

  <!-- âœ… OG æ–‡æ¡ˆæ›´æ–°ï¼ˆä½ é¸çš„ç‰ˆæœ¬ï¼‰ -->
  <meta property="og:title" content="ä¸çŸ¥é“è·¨å¹´è¦å‚³ä»€éº¼ï¼Ÿä¸€éµç”Ÿæˆ 2026 æ–°å¹´ç¥ç¦">
  <meta property="og:description" content="é¸è§’è‰²ã€é•·æŒ‰ä¸€ä¸‹ï¼Œå°±èƒ½æŠŠç¥ç¦ç›´æ¥é€å‡ºå»ã€‚è·¨å¹´ä¸å†å¡è©ã€‚">

  <!-- âœ… OG URL ä½¿ç”¨ä¹¾æ·¨ç¶²å€ï¼šè·¨å¹³å°ï¼ˆThreads/FB/LINE/IGï¼‰ä¸€è‡´ï¼Œé¿å… OG å¿«å–ç¢ç‰‡åŒ– -->
  <meta property="og:url" content="https://boom.sppfoundry.co/">
  <meta property="og:image" content="https://boom.sppfoundry.co/og-newyear-2026.png">
  <meta property="og:locale" content="zh_TW">

  <!-- âœ… Twitter Cardï¼ˆè£œå¼·éƒ¨åˆ†å¹³å°çš„é è¦½ï¼‰ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ä¸çŸ¥é“è·¨å¹´è¦å‚³ä»€éº¼ï¼Ÿä¸€éµç”Ÿæˆ 2026 æ–°å¹´ç¥ç¦">
  <meta name="twitter:description" content="é¸è§’è‰²ã€é•·æŒ‰ä¸€ä¸‹ï¼Œå°±èƒ½æŠŠç¥ç¦ç›´æ¥é€å‡ºå»ã€‚è·¨å¹´ä¸å†å¡è©ã€‚">
  <meta name="twitter:image" content="https://boom.sppfoundry.co/og-newyear-2026.png">
  <meta name="twitter:url" content="https://boom.sppfoundry.co/">

  <!-- JSON-LD çµæ§‹åŒ–è³‡æ–™ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "2026 æ–°å¹´ç¥ç¦ç”¢ç”Ÿå™¨ (BOOM!)",
    "url": "https://boom.sppfoundry.co/",
    "applicationCategory": "LifestyleApplication",
    "operatingSystem": "All",
    "inLanguage": "zh-TW",
    "isAccessibleForFree": true,
    "description": "ä¸€æ¬¾å°ˆç‚º 2026 è·¨å¹´è¨­è¨ˆçš„ç·šä¸Šç¥ç¦èªç”¢ç”Ÿå™¨ã€‚ä¾ç…§å°è±¡ï¼ˆæ›–æ˜§ã€å‰ä»»ã€è€é—†ã€æœ‹å‹ç­‰ï¼‰ä¸€éµç”Ÿæˆå®¢è£½åŒ–æ–‡æ¡ˆã€‚",
    "image": "https://boom.sppfoundry.co/og-newyear-2026.png",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "TWD"
    }
  }
  </script>

  <!-- æˆªåœ–èˆ‡ç…™ç«ç‰¹æ•ˆ -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --glass-border: 1px solid rgba(255, 255, 255, 0.25);
      --gold: #FFD700;
      --mobile-width: 480px;
      --base-bg-color: #2b0030;

      /* 12å®®æ ¼é»æ“Šå›é¥‹ */
      --tile-glow: 0 0 0 2px rgba(255, 255, 255, 0.9), 0 0 22px rgba(255, 255, 255, 0.35);
      --tile-active-bg: rgba(255, 255, 255, 0.22);
    }

    * {
      box-sizing: border-box;
      user-select: none;
      -webkit-user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
      font-family: 'Noto Sans TC', system-ui, -apple-system, sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100vh;
      min-height: 100dvh;
      overflow-x: hidden;
      overflow-y: auto;
      background-color: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    #app-background {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: var(--mobile-width);
      height: 100%;
      background-image: url('./boom_bk.png');
      background-color: var(--base-bg-color);
      background-size: cover;
      background-position: center bottom;
      background-repeat: no-repeat;
      z-index: -2;
      box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
    }

    .bg-overlay {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: var(--mobile-width);
      height: 100%;
      background: radial-gradient(circle at center, rgba(40, 10, 60, 0.1) 0%, rgba(0, 0, 0, 0.4) 100%);
      z-index: -1;
      pointer-events: none;
    }

    /* é è¼‰å€ (éš±è—) */
    #preload-area {
      display: none;
      width: 0;
      height: 0;
      overflow: hidden;
    }

    header {
      margin-top: 40px;
      margin-bottom: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      z-index: 10;
      width: 100%;
      padding: 0 20px;
    }

    .logo {
      font-family: 'Arial Black', sans-serif;
      font-size: 2.8rem;
      color: #fff;
      text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
      letter-spacing: 2px;
      margin-bottom: 8px;
    }

    .header-text {
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    .header-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .header-subtitle {
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.9;
    }

    #app-container {
      width: 100%;
      max-width: var(--mobile-width);
      height: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    #home-view {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding-bottom: 40px;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      width: 100%;
      padding: 20px;
      margin: 0 20px;
      background: rgba(255, 255, 255, 0.12);
      border-radius: 28px;
      border: var(--glass-border);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      box-sizing: border-box;
    }

    .grid-item {
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 18px;
      color: #fff;
      cursor: pointer;
      padding: 5px 0;
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease, border-color 0.12s ease;
      will-change: transform;
      outline: none;
    }

    .grid-item:active {
      transform: scale(0.95);
      background: var(--tile-active-bg);
    }

    .grid-item.is-selected {
      transform: scale(0.96);
      box-shadow: var(--tile-glow);
      border-color: rgba(255, 255, 255, 0.85);
      background: rgba(255, 255, 255, 0.20);
    }

    .btn-icon {
      font-size: 2.2rem;
      margin-bottom: 6px;
      filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.3));
    }

    .btn-text {
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 1px;
    }

    /* === é›†æ°£ç•«é¢ === */
    #charge-view {
      display: none;
      position: fixed;
      inset: 0;
      height: 100dvh;
      z-index: 50;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      touch-action: none;
    }

    .charge-circle {
      width: 240px;
      height: 240px;
      position: absolute;
      border-radius: 50%;
      background: conic-gradient(#fff var(--progress, 0%), rgba(255, 255, 255, 0.15) 0%);
      -webkit-mask: radial-gradient(transparent 64%, black 65%);
      mask: radial-gradient(transparent 64%, black 65%);
      transform: translateZ(0);
      z-index: 1;
    }

    .charge-glow {
      position: absolute;
      width: 240px;
      height: 240px;
      border-radius: 50%;
      box-shadow: 0 0 40px rgba(255, 255, 255, 0.4);
      opacity: 0.5;
      pointer-events: none;
      z-index: 0;
    }

    .charge-text {
      position: relative;
      z-index: 10;
      font-size: 1.4rem;
      font-weight: 900;
      color: #fff;
      text-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
      letter-spacing: 2px;
      text-align: center;
      pointer-events: none;
    }

    .finger-hint {
      position: absolute;
      bottom: 25%;
      font-size: 3.5rem;
      filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.8));
      animation: bounce 1.5s infinite;
      z-index: 2;
      pointer-events: none;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(15px);
      }
    }

    .shaking {
      animation: shake 0.5s cubic-bezier(.36, .07, .19, .97) both infinite;
    }

    @keyframes shake {

      10%,
      90% {
        transform: translate3d(-2px, 0, 0);
      }

      20%,
      80% {
        transform: translate3d(4px, 0, 0);
      }

      30%,
      50%,
      70% {
        transform: translate3d(-6px, 0, 0);
      }

      40%,
      60% {
        transform: translate3d(6px, 0, 0);
      }
    }

    /* === çµæœå½ˆçª— === */
    #result-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 100;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      overflow-y: auto;
      padding: 20px 0;
      animation: modalFadeIn 0.4s ease-out;
    }

    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .role-hint-label {
      color: var(--gold);
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 80px;
      margin-bottom: 25px;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
      letter-spacing: 2px;
      text-align: center;
      animation: slideDown 0.5s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result-card {
      width: 88%;
      max-width: 340px;
      aspect-ratio: 9/16;
      padding: 0;
      background-image: url('./boom_bk.png');
      background-color: var(--base-bg-color);
      background-size: cover;
      background-position: center;
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.6);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(0, 0, 0, 0.5));
      backdrop-filter: blur(2px);
      z-index: 1;
    }

    .quote-text {
      position: relative;
      z-index: 2;
      color: #fff;
      font-size: 1.6rem;
      font-weight: 700;
      text-align: center;
      line-height: 1.5;
      text-shadow: 0 2px 15px rgba(0, 0, 0, 0.9);
      user-select: text;
      -webkit-user-select: text;
      width: 100%;
      padding: 40px 20px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .action-bar {
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      width: 100%;
    }

    .btn-restart {
      background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
      color: #2a0033;
      border: none;
      padding: 14px 45px;
      font-size: 1.1rem;
      font-weight: 800;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(255, 165, 0, 0.4);
      transition: transform 0.1s;
    }

    .btn-restart:active {
      transform: scale(0.96);
    }

    .share-icons {
      display: flex;
      gap: 18px;
    }

    .icon-btn {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(5px);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
    }

    .icon-btn svg {
      width: 26px;
      height: 26px;
      fill: white;
      filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.5));
    }

    .icon-btn:active {
      background: rgba(255, 255, 255, 0.3);
    }

    #toast {
      position: fixed;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(30, 30, 30, 0.95);
      color: #fff;
      padding: 14px 28px;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: bold;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      z-index: 200;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    #toast.show {
      opacity: 1;
    }

    #flash-bang {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: white;
      opacity: 0;
      pointer-events: none;
      z-index: 999;
      transition: opacity 0.5s ease-out;
    }

    /* === æ›´å¤š (â‹¯) Bottom Sheet === */
    #more-sheet {
      display: none;
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 300;
      padding: 14px 14px 18px;
      background: rgba(20, 20, 20, 0.92);
      border-top-left-radius: 22px;
      border-top-right-radius: 22px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.4);
      max-width: var(--mobile-width);
      margin: 0 auto;
    }

    #more-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 299;
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    .more-title {
      font-weight: 800;
      letter-spacing: 1px;
      margin: 6px 6px 10px;
      color: rgba(255, 255, 255, 0.9);
    }

    .more-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .more-btn {
      width: 100%;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.08);
      color: #fff;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      text-align: left;
    }

    .more-btn:active {
      background: rgba(255, 255, 255, 0.18);
    }

    .more-btn.secondary {
      background: rgba(255, 255, 255, 0.05);
      color: rgba(255, 255, 255, 0.9);
    }

    /* SEO å±•é–‹å€ */
    .seo-faq {
      width: 100%;
      max-width: var(--mobile-width);
      margin: 32px auto 24px;
      padding: 0 20px 40px;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.7);
    }

    .seo-faq details {
      background: rgba(0, 0, 0, 0.35);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 12px 14px;
    }

    .seo-faq summary {
      cursor: pointer;
      font-weight: 600;
      list-style: none;
    }

    .seo-faq summary::-webkit-details-marker {
      display: none;
    }

    .seo-faq h1 {
      font-size: 1rem;
      margin: 12px 0 4px;
    }

    .seo-faq h2 {
      font-size: 0.9rem;
      margin: 10px 0 4px;
    }

    .seo-faq p {
      margin: 4px 0 8px;
      line-height: 1.5;
    }

    /* âœ… è®“ SEO/FAQ å€å¯é¸å–ã€å¯è¤‡è£½ï¼ˆä¸å½±éŸ¿ä¸Šæ–¹äº’å‹•å€ï¼‰ */
    .seo-faq,
    .seo-faq * {
      user-select: text;
      -webkit-user-select: text;
    }

    /* SPP Foundry footer (Standard Dark Version) */
    .spp-footer {
      width: 100%;
      margin: 0;
      margin-top: auto;
      /* æ¨åˆ°æœ€åº• */
      padding: 32px 20px 40px;
      /* ä¸‹æ–¹ç•™ç™½é©æ‡‰æ‰‹æ©Ÿæ‰‹å‹¢å€ */
      background: rgba(0, 0, 0, 0.25);
      /* æ·±è‰²èƒŒæ™¯ */
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.15);
      text-align: center;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.5);
      border-radius: 0;
      /* ç§»é™¤åœ“è§’ */
    }

    .spp-footer-inner {
      display: flex;
      flex-direction: column;
      /* å‚ç›´å †ç–Š */
      gap: 12px;
      /* ä¸Šä¸‹è¡Œé–“è· */
      align-items: center;
      justify-content: center;
    }

    .spp-footer-left {
      font-weight: 500;
      letter-spacing: 1px;
    }

    .spp-footer-link {
      color: rgba(255, 255, 255, 0.6);
      text-decoration: none;
      transition: color 0.2s;
    }

    .spp-footer-link:hover {
      color: #fff;
      text-decoration: underline;
    }

    /* ç¢ºä¿ç§»é™¤ dot */
    .spp-footer-dot {
      display: none;
    }
  </style>
</head>

<body>
  <div id="app-background"></div>
  <div class="bg-overlay"></div>
  <div id="flash-bang"></div>
  <div id="toast">âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿</div>
  <div id="preload-area"></div>

  <!-- æ›´å¤šï¼šBackdrop + Sheet -->
  <div id="more-backdrop" onclick="closeMore()"></div>
  <div id="more-sheet" role="dialog" aria-modal="true" aria-label="æ›´å¤šåŠŸèƒ½">
    <div class="more-title">æ›´å¤š</div>
    <div class="more-actions">
      <button class="more-btn" onclick="shareLink()">é‚€è«‹æœ‹å‹ä¾†æŠ½</button>
      <button class="more-btn" onclick="shareLineText()">LINE åˆ†äº«æ–‡å­—</button>
      <button class="more-btn" onclick="downloadImage()">å„²å­˜åœ–ç‰‡ï¼ˆä¸‹è¼‰ï¼‰</button>
      <button class="more-btn secondary" onclick="closeMore()">å–æ¶ˆ</button>
    </div>
  </div>

  <div id="app-container">
    <div id="home-view">
      <header>
        <div class="logo">BOOM!</div>
        <div class="header-text">
          <div class="header-title">è·¨å¹´ 00:00 è¦å‚³ä»€éº¼ï¼Ÿ</div>
          <div class="header-subtitle">é»ä½ æƒ³å‚³çš„äººï¼Œæˆ‘ä¾†å¹«ä½ </div>
        </div>
      </header>

      <div class="grid-container" id="role-grid">
        <div class="grid-item" data-role="crush">
          <div class="btn-icon">ğŸ’˜</div>
          <div class="btn-text">æ›–æ˜§</div>
        </div>
        <div class="grid-item" data-role="ex">
          <div class="btn-icon">ğŸ’”</div>
          <div class="btn-text">å‰ä»»</div>
        </div>
        <div class="grid-item" data-role="husband">
          <div class="btn-icon">ğŸ’</div>
          <div class="btn-text">è€å…¬</div>
        </div>
        <div class="grid-item" data-role="wife">
          <div class="btn-icon">ğŸ’„</div>
          <div class="btn-text">è€å©†</div>
        </div>
        <div class="grid-item" data-role="bestie">
          <div class="btn-icon">ğŸ‘¯â€â™€ï¸</div>
          <div class="btn-text">é–¨èœœ</div>
        </div>
        <div class="grid-item" data-role="buddy">
          <div class="btn-icon">ğŸ»</div>
          <div class="btn-text">æ­»é»¨</div>
        </div>
        <div class="grid-item" data-role="colleague">
          <div class="btn-icon">ğŸ’¼</div>
          <div class="btn-text">åŒäº‹</div>
        </div>
        <div class="grid-item" data-role="boss">
          <div class="btn-icon">ğŸ’°</div>
          <div class="btn-text">è€é—†</div>
        </div>
        <div class="grid-item" data-role="parents">
          <div class="btn-icon">ğŸ§§</div>
          <div class="btn-text">çˆ¸åª½</div>
        </div>
        <div class="grid-item" data-role="enemy">
          <div class="btn-icon">â˜ ï¸</div>
          <div class="btn-text">æ­»å°é ­</div>
        </div>
        <div class="grid-item" data-role="eng_quotes">
          <div class="btn-icon">âœ¨</div>
          <div class="btn-text">è‹±æ–‡</div>
        </div>
        <div class="grid-item" data-role="random">
          <div class="btn-icon">ğŸ²</div>
          <div class="btn-text">éš¨æ©ŸæŠ½</div>
        </div>
      </div>
    </div>

    <div id="charge-view">
      <div class="charge-glow"></div>
      <div class="charge-circle" id="charge-circle"></div>
      <div class="charge-text">é•·æŒ‰æŠ½ç¥ç¦</div>
      <div class="finger-hint">ğŸ‘†</div>
    </div>

    <div id="result-modal">
      <div class="role-hint-label" id="role-label">TO YOU</div>

      <div class="result-card" id="capture-target">
        <div class="card-overlay"></div>
        <div class="quote-text" id="result-text">Loading...</div>
      </div>

      <div class="action-bar">
        <button class="btn-restart" onclick="resetApp()">å†æŠ½ä¸€å¼µ</button>

        <div class="share-icons">
          <!-- è¤‡è£½æ–‡å­— -->
          <div class="icon-btn" onclick="copyText()" title="è¤‡è£½æ–‡å­—">
            <svg viewBox="0 0 24 24">
              <path
                d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
            </svg>
          </div>

          <!-- åˆ†äº«æ–‡å­—ï¼ˆä¹¾æ·¨ç‰ˆï¼šä¸å¸¶ç¶²å€ï¼›ä¸æ”¯æ´å°±è¤‡è£½æ–‡å­—ï¼‰ -->
          <div class="icon-btn" onclick="shareText()" title="åˆ†äº«æ–‡å­—">
            <svg viewBox="0 0 24 24">
              <path
                d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.03-.47-.09-.7l7-4.11c.54.5 1.25.81 2.09.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.03.47.09.7l-7 4.11C7.54 9.31 6.83 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.83 0 1.54-.31 2.09-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92S21 19.63 21 18.08s-1.34-3-3-3z" />
            </svg>
          </div>

          <!-- åˆ†äº«åœ–ç‰‡ï¼ˆå„ªå…ˆ Web Share filesï¼›ä¸æ”¯æ´å°±å„²å­˜åœ–ç‰‡ï¼‰ -->
          <div class="icon-btn" onclick="shareImage()" title="åˆ†äº«åœ–ç‰‡">
            <svg viewBox="0 0 24 24">
              <path
                d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
            </svg>
          </div>

          <!-- æ›´å¤š -->
          <div class="icon-btn" onclick="openMore()" title="æ›´å¤š">
            <svg viewBox="0 0 24 24">
              <path
                d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
            </svg>
          </div>
        </div>
      </div>
    </div> <!-- âœ… é—œé–‰ #result-modalï¼ˆé‡è¦ï¼šSEO å¿…é ˆåœ¨ modal å¤–ï¼‰ -->

    <!-- SEO / GEO å¯è®€å…§å®¹ -->
    <section class="seo-faq">
      <details>
        <summary>ï¼‹ é—œæ–¼ Boom! ç¥ç¦æŠ½å¡</summary>

        <h1>2026 è·¨å¹´å‰µæ„ç¥ç¦èªå¤§å…¨</h1>
        <p>é‚„åœ¨ç…©æƒ± 2026 è·¨å¹´è¦å‚³ä»€éº¼çµ¦æ›–æ˜§å°è±¡å—ï¼Ÿé€™è£¡æ•´ç†äº†çµ¦æ›–æ˜§ã€å‰ä»»ã€è€é—†ã€æ­»é»¨ã€çˆ¸åª½çš„å‰µæ„ç¥ç¦èªï¼Œè®“ä½ ä¸€éµè¤‡è£½ã€ä¸æ€•è©çª®ã€‚</p>

        <h2>çµ¦è€é—†çš„ 2026 è·¨å¹´ç¥ç¦</h2>
        <p>ç¯„ä¾‹å¦‚ï¼šè€é—† 2026 ä¹Ÿè¦è¢«æ‚¨å¸¶é£›ã€å¸Œæœ›å…¬å¸è¶Šä¾†è¶Šå¤§ã€è¬è¬æ‚¨ä»Šå¹´çš„ç…§é¡§ï¼Œä¹Ÿå¯ä»¥ç©ç¬‘èªª 2026 å¸Œæœ›æˆ‘å€‘åŠ ç­æœ‰åŠ éŒ¢ã€å¹´çµ‚å¤šä¸€é»ã€é–‹æœƒä¸è¦å†é–‹åˆ°åŠå¤œã€‚</p>

        <h2>çµ¦å‰ä»»çš„ 2026 è·¨å¹´ç¥ç¦</h2>
        <p>ç¯„ä¾‹å¦‚ï¼šç¥æˆ‘å€‘å„è‡ªå®‰å¥½ï¼Œä¸è¦äº’ç›¸æ‰“æ“¾ã€å¸Œæœ›ä½ éå¾—å¾ˆå¥½ï¼Œæ¯”è·Ÿæˆ‘åœ¨ä¸€èµ·æ™‚æ›´å¥½ã€è¬è¬ä½ æ›¾ç¶“è®“æˆ‘é‚£éº¼èªçœŸå–œæ­¡éï¼Œä¹Ÿç¥ä½ æ‰¾åˆ°çœŸæ­£å±¬æ–¼ä½ çš„å¹¸ç¦ã€‚</p>

        <h2>çµ¦è€å…¬è€å©†çš„æç¬‘ç¥ç¦</h2>
        <p>ç¯„ä¾‹å¦‚ï¼šè€å…¬ï¼Œ2026 æˆ‘å€‘è¦ä¸è¦ç°½å’Œå¹³æ¢ç´„ï¼Œèª°å…ˆç”Ÿæ°£èª°ç¡æ²™ç™¼ï¼›è€å©†ï¼Œ2026 èƒ½ä¸èƒ½æŠŠã€Œéš¨ä¾¿ã€å¾äººç”Ÿå­—å…¸è£¡åˆªé™¤ï¼›æˆ–è€…ç”œä¸€é»ï¼š2026 é‚„è¦ä¸€èµ·è·¨å¾ˆå¤šå€‹å¹´ã€ç¹¼çºŒç•¶æˆ‘ä¸€è¼©å­çš„ç”·æœ‹å‹ï¼å¥³æœ‹å‹ã€‚</p>
      </details>
    </section>

    <footer class="spp-footer">
      <div class="spp-footer-inner">
        <div class="spp-footer-left">Â© SPP Foundry</div>
        <div class="spp-footer-right">
          <a href="mailto:hello@sppfoundry.co" class="spp-footer-link">hello@sppfoundry.co</a>
        </div>
      </div>
    </footer>

  </div> <!-- âœ… é—œé–‰ #app-container -->

  <script>
    const bgMap = {
      crush: 'bg_love.png', ex: 'bg_love.png', husband: 'bg_love.png', wife: 'bg_love.png',
      boss: 'bg_work.png', colleague: 'bg_work.png',
      parents: 'bg_rich.png', eng_quotes: 'bg_rich.png', random: 'bg_rich.png',
      bestie: 'bg_party.png', buddy: 'bg_party.png',
      enemy: 'bg_cool.png'
    };

    const roleNameMap = {
      crush: 'ğŸ’˜ æ›–æ˜§', ex: 'ğŸ’” å‰ä»»', husband: 'ğŸ’ è€å…¬', wife: 'ğŸ’„ è€å©†',
      bestie: 'ğŸ‘¯â€â™€ï¸ é–¨èœœ', buddy: 'ğŸ» æ­»é»¨', colleague: 'ğŸ’¼ åŒäº‹', boss: 'ğŸ’° è€é—†',
      parents: 'ğŸ§§ çˆ¸åª½', enemy: 'â˜ ï¸ æ­»å°é ­', eng_quotes: 'âœ¨ 2026', random: 'ğŸ² å¹¸é‹å…’'
    };

    // =========================
    // GA4 helpersï¼ˆå®‰å…¨ã€å¯é‡ç”¨ï¼‰
    // =========================
    function gaEvent(eventName, params = {}) {
      try {
        if (typeof gtag === 'function') {
          gtag('event', eventName, params);
        }
      } catch (e) { }
    }

    function currentRolePayload(extra = {}) {
      return {
        role_id: currentRole || '(none)',
        role_name: roleNameMap[currentRole] || currentRole || '(none)',
        ...extra
      };
    }

    // =========================
    // Clipboard fallbackï¼ˆé¿å… in-app browser é™åˆ¶ï¼‰
    // =========================
    function fallbackCopyTextToClipboard(text) {
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.setAttribute('readonly', '');
        ta.style.position = 'fixed';
        ta.style.top = '-9999px';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, ta.value.length);
        const ok = document.execCommand('copy');
        document.body.removeChild(ta);
        return ok;
      } catch (e) {
        return false;
      }
    }

    // é è¼‰èƒŒæ™¯åœ–ï¼ˆé¿å…åˆ‡æ›é–ƒçˆï¼‰â€” âœ… çµ±ä¸€åŠ  ./ï¼Œè·¯å¾‘æ›´ç©©
    const preloadArea = document.getElementById('preload-area');
    Object.values(bgMap).forEach(src => {
      const img = new Image();
      img.src = `./${src}`;
      preloadArea.appendChild(img);
    });

    // =========================
    // âœ… å®Œæ•´æ–‡æ¡ˆè³‡æ–™åº«ï¼ˆ12 è§’è‰²ï¼‰
    // =========================
    const quotesData = {
      crush: [
        "2026 æƒ³è·Ÿä½ çš„è¨Šæ¯æ¡†ä¸€ç›´åœ¨ç½®é ‚",
        "æ–°å¹´å€’æ•¸çš„æ™‚å€™ï¼Œèƒ½ä¸èƒ½å‰›å¥½æƒ³åˆ°æˆ‘",
        "2026 æƒ³è®Šæˆä½ æ¯å¤©æ—©å®‰ç¬¬ä¸€å€‹çœ‹åˆ°çš„äºº",
        "æ˜å¹´é–‹å§‹ï¼Œé¡˜æ„æŠŠå–œæ­¡ä½ å¯«é€²è¡Œç¨‹è¡¨å—",
        "2026 è®“æˆ‘åæ­£è¨€é †ç•¶ä½ è·¨å¹´ç¬¬ä¸€å€‹ç¥ç¦çš„äººå¥½ä¸å¥½",
        "å€’æ•¸çµæŸå¾Œï¼Œå¯ä»¥æ˜¯ä½ å…ˆèªªæ–°å¹´å¿«æ¨‚å—",
        "2026 æƒ³è·Ÿä½ ä¸€èµ·æŠŠæ›–æ˜§è®Šæˆæ˜åªš",
        "æ–°å¹´é¡˜æœ›æ˜¯æŠŠä½ è®Šæˆæˆ‘çš„",
        "2026 èƒ½ä¸èƒ½è®“æˆ‘å¾å‚™èƒå‡æ­£å®®",
        "æ˜å¹´é–‹å§‹ï¼Œå…è¨±æˆ‘æ¯å¤©éƒ½æ‰¾ç†ç”±è·Ÿä½ èŠå¤©å—",
        "2026 æƒ³è·Ÿä½ ä¸€èµ·æŠŠã€Œæ™šå®‰ã€è®Šæˆã€Œæ—©é»ä¾†æ¥æˆ‘ã€",
        "è·¨å¹´ç…™ç«å†æ¼‚äº®ï¼Œä¹Ÿä¸å¦‚ä½ å›æˆ‘è¨Šæ¯é‚£ç¬é–“",
        "2026 æƒ³è·Ÿä½ å¾æ›–æ˜§èµ°åˆ°æœªä¾†",
        "æ–°å¹´ç¬¬ä¸€å€‹æƒ³åˆ†äº«çš„å¿«æ¨‚ï¼Œæ˜¯ä½ ",
        "æ˜å¹´é–‹å§‹ï¼Œé¡˜æ„è®“æˆ‘é™ªä½ ç†¬å¤œè·¨å¹´å—",
        "2026 æƒ³æŠŠå–œæ­¡ä½ èªªå¾—æ›´å¤§è²",
        "å€’æ•¸ 3 2 1 å¾Œï¼Œèƒ½ä¸èƒ½æ˜¯æˆ‘å€‘é–‹å§‹",
        "2026 è®“æˆ‘ç•¶ä½ å°ˆå±¬çš„è·¨å¹´é©šå–œ",
        "æ˜å¹´é–‹å§‹ï¼Œå…è¨±æˆ‘æ¯å¤©éƒ½å·å·å–œæ­¡ä½ å—",
        "2026 æƒ³è·Ÿä½ ä¸€èµ·æŠŠæ›–æ˜§è®Šæˆç­”æ¡ˆ",
        "æ–°å¹´å¿«æ¨‚ï¼Œé †ä¾¿å•ä½ è¦ä¸è¦ç•¶æˆ‘å¥³ï¼ç”·æœ‹å‹",
        "2026 ç¬¬ä¸€å€‹æƒ³è¦‹çš„äººï¼Œæ˜¯ä½ ",
        "æ˜å¹´é–‹å§‹ï¼Œé¡˜æ„æŠŠå‚™è¨»æ”¹æˆæƒ…ä¾¶æš±ç¨±å—",
        "2026 æƒ³è·Ÿä½ ä¸€èµ·æŠŠå–œæ­¡èªªå‡ºå£",
        "å€’æ•¸çµæŸå¾Œï¼Œç¬¬ä¸€å€‹æŠ±ä½ çš„äººæƒ³æ˜¯æˆ‘"
      ],
      ex: [
        "2026 å¸Œæœ›ä½ éå¾—å¾ˆå¥½ï¼Œæ¯”è·Ÿæˆ‘åœ¨ä¸€èµ·æ™‚æ›´å¥½",
        "æ–°å¹´äº†ï¼Œç¥ä½ æ‰¾åˆ°çœŸæ­£å°çš„äºº",
        "2026 æˆ‘å€‘éƒ½æˆç‚ºæ›´å¥½çš„äººå§",
        "è¬è¬ä½ æ›¾ç¶“è®“æˆ‘é‚£éº¼èªçœŸå–œæ­¡é",
        "2026 å¸Œæœ›ä½ å¹¸ç¦ï¼ŒçœŸçš„",
        "ç•¶å¹´æ²’èªªå‡ºå£çš„æ–°å¹´å¿«æ¨‚ï¼Œç¾åœ¨è£œä¸Š",
        "2026 é¡˜ä½ è¢«ä¸–ç•Œæº«æŸ”ä»¥å¾…",
        "è¬è¬ä½ è®“æˆ‘å­¸æœƒäº†æ”¾æ‰‹",
        "2026 æˆ‘å€‘éƒ½æ‰¾åˆ°å±¬æ–¼è‡ªå·±çš„å¿«æ¨‚å§",
        "æ–°å¹´é¡˜æœ›æ˜¯æˆ‘å€‘éƒ½è®Šæˆæ›´å¥½çš„äºº",
        "2026 ç¥ä½ å‰ç¨‹ä¼¼éŒ¦ï¼Œå¾Œä¾†å±…ä¸Š",
        "è¬è¬ä½ æ›¾ç¶“å‡ºç¾é",
        "2026 å¸Œæœ›ä½ èº«é‚Šçš„äººæ¯”æˆ‘æ›´æ„›ä½ ",
        "ç•¶å¹´æ²’é€å‡ºçš„ç¥ç¦ï¼Œç¾åœ¨è£œä¸Š",
        "2026 æˆ‘å€‘éƒ½å¥½å¥½ç”Ÿæ´»å§",
        "è¬è¬ä½ è®“æˆ‘æˆé•·",
        "2026 é¡˜ä½ æ‰¾åˆ°çœŸæ­£å±¬æ–¼ä½ çš„å¹¸ç¦",
        "æ–°å¹´å¿«æ¨‚ï¼Œé™Œç”Ÿäºº",
        "2026 æˆ‘å€‘éƒ½æˆç‚ºæ›¾ç¶“æœ€æƒ³æˆç‚ºçš„äºº",
        "è¬è¬ä½ è®“æˆ‘çŸ¥é“ä»€éº¼æ˜¯æ„›",
        "2026 ç¥ä½ ä¸€åˆ‡éƒ½å¥½",
        "ç•¶å¹´æ²’èªªå®Œçš„è©±ï¼Œå°±åˆ°é€™è£¡å§",
        "2026 æˆ‘å€‘éƒ½å¾€å‰èµ°å§",
        "è¬è¬ä½ æ›¾ç¶“è®“æˆ‘é‚£éº¼å‹‡æ•¢",
        "2026 é¡˜æˆ‘å€‘éƒ½æ‰¾åˆ°å°çš„äºº"
      ],
      husband: [
        "æ–°å¹´ç¬¬ä¸€å€‹æŠ±æŠ±ç•™çµ¦ä½ ",
        "ä¹‹å¾Œçš„æ¯ä¸€å¹´éƒ½é‚„è¦è·Ÿä½ ä¸€èµ·è·¨ç„¡æ•¸å€‹å¹´",
        "è¬è¬ä½ è®“æˆ‘æ¯å¤©éƒ½åƒç†±æˆ€ä¸€æ¨£",
        "2026 ç¹¼çºŒå¯µæˆ‘ç•¶å°å…¬ä¸»",
        "è€å…¬æ–°å¹´å¿«æ¨‚ï¼Œæ„›ä½ åˆ° 2026 ä¹‹å¾Œ",
        "2026 é‚„è¦è·Ÿä½ ä¸€èµ·è®Šè€",
        "è¬è¬ä½ è®“æˆ‘æˆç‚ºæœ€å¹¸ç¦çš„äººå¦»",
        "2026 ç¹¼çºŒè®“æˆ‘ç•¶ä½ çš„å°å°¾å·´",
        "è€å…¬ï¼Œè·¨å¹´ä¹Ÿè¦é»è‘—ä½ ",
        "2026 é‚„è¦è·Ÿä½ ä¸€èµ·è³´åºŠåˆ°ä¸­åˆ",
        "è¬è¬ä½ æŠŠé¤˜ç”Ÿéƒ½çµ¦äº†æˆ‘",
        "2026 ç¹¼çºŒç•¶æˆ‘çš„å°ˆå±¬ææ¬¾æ©Ÿè·ŸæŠ±æŠ±æ©Ÿ",
        "è€å…¬ï¼Œ2026 ä¹Ÿè¦æ„›æˆ‘æœ€å¤š",
        "2026 é‚„è¦è·Ÿä½ ä¸€èµ·åµæ¶å’Œå¥½",
        "è¬è¬ä½ è®“æˆ‘æ¯å¤©éƒ½åƒæ–°å©š",
        "2026 ç¹¼çºŒè®“æˆ‘ç•¶ä½ æ‰‹æ©Ÿç¬¬ä¸€é †ä½",
        "è€å…¬ï¼Œ2026 ä¹Ÿè¦ç¬¬ä¸€å€‹èªªæ„›ä½ ",
        "2026 é‚„è¦è·Ÿä½ ä¸€èµ·é¤Šè€",
        "è¬è¬ä½ è®“æˆ‘é€™éº¼å¹¸ç¦",
        "è€å…¬ï¼Œ2026 ä¹Ÿè¦è¢«ä½ å¯µå£",
        "2026 é‚„è¦è·Ÿä½ ä¸€èµ·çœ‹ç…™ç«",
        "è¬è¬ä½ é¸æ“‡äº†æˆ‘",
        "2026 ç¹¼çºŒæ„›ä½ åˆ°å¤©è’åœ°è€",
        "è€å…¬ï¼Œ2026 æˆ‘å€‘è¦ä¸è¦é‡æ–°æˆ€æ„›ä¸€æ¬¡ï¼Ÿæˆ‘å…ˆè£ä¸èªè­˜ä½ ",
        "2026 å¸Œæœ›ä½ ç¹¼çºŒè³ºéŒ¢ï¼Œæˆ‘ç¹¼çºŒèŠ±éŒ¢",
        "è€å…¬ï¼Œ2026 å¯ä¸å¯ä»¥æŠŠã€ŒçŸ¥é“äº†ã€æ”¹æˆã€Œè€å©†èªªå¾—å°ã€",
        "æ–°å¹´å¿«æ¨‚ï¼2026 èƒ½ä¸èƒ½åˆ¥å†èªªã€Œå¦³æ€éº¼åˆè²·ã€",
        "è€å…¬ï¼Œ2026 æˆ‘å€‘è¦ä¸è¦ç°½å’Œå¹³æ¢ç´„ï¼Ÿèª°å…ˆç”Ÿæ°£èª°ç¡æ²™ç™¼",
        "2026 ç¥ä½ éŠæˆ²æ‰“å¾—é–‹å¿ƒï¼Œæˆ‘è³¼ç‰©è²·å¾—é–‹å¿ƒ",
        "è€å…¬ï¼Œ2026 å¯ä¸å¯ä»¥æŠŠé™æ§å™¨ä¸»æ¬Šé‚„çµ¦æˆ‘",
        "è€å…¬ï¼Œ2026 ä½ è¦ä¸è¦é‡æ–°è¿½æˆ‘ä¸€æ¬¡ï¼Ÿæˆ‘ä¿è­‰é€™æ¬¡ä¸ç­”æ‡‰",
        "2026 å¸Œæœ›ä½ ç¹¼çºŒæ„›æˆ‘ï¼Œæˆ‘ä¹Ÿç¹¼çºŒå¿ä½ ",
        "è€å…¬ï¼Œ2026 æˆ‘å€‘ç¹¼çºŒç›¸æ„›ç›¸æ®º"
      ],
      wife: [
        "è€å©† 2026 ä¹Ÿè¦è¢«æˆ‘å¯µä¸Šå¤©",
        "æ–°å¹´ç¬¬ä¸€å€‹å»çµ¦ä½ ",
        "2026 ç¹¼çºŒè®“ä½ ç•¶æˆ‘æŒä¸Šæ˜ç ",
        "è¬è¬ä½ å«çµ¦æˆ‘",
        "2026 é‚„è¦ç¹¼çºŒç•¶ä½ çš„äººå½¢æŠ±æ•",
        "è€å©†æ–°å¹´å¿«æ¨‚ï¼Œæ„›ä½ åˆ°æ°¸é ",
        "2026 ç¹¼çºŒè®“ä½ ç•¶æˆ‘æ‰‹æ©Ÿæ¡Œé¢",
        "è¬è¬ä½ è®“æˆ‘æˆç‚ºæœ€å¹¸ç¦çš„è€å…¬",
        "2026 é‚„è¦ç¹¼çºŒçµ¦ä½ è½‰å¸³å¯µä½ ",
        "è€å©†ï¼Œ2026 ä¹Ÿè¦è¢«æˆ‘ä¿è­·",
        "2026 ç¹¼çºŒè®“ä½ ç‚ºæ‰€æ¬²ç‚º",
        "è¬è¬ä½ è®“æˆ‘æ¯å¤©éƒ½æƒ³å›å®¶",
        "2026 é‚„è¦ç¹¼çºŒç•¶ä½ å°ˆå±¬æ”å½±å¸«",
        "è€å©†ï¼Œ2026 ä¹Ÿè¦è¢«æˆ‘æ„›åˆ°ç‰™é½’æ‰å…‰",
        "2026 ç¹¼çºŒè®“ä½ è²·è²·è²·",
        "è¬è¬ä½ è®“æˆ‘é€™éº¼å¹¸ç¦",
        "2026 é‚„è¦ç¹¼çºŒå“„ä½ ç¡è¦º",
        "è€å©†ï¼Œ2026 ä¹Ÿè¦è¢«æˆ‘æ§åœ¨æ‰‹å¿ƒ",
        "2026 ç¹¼çºŒç•¶ä½ ä¸€è¼©å­çš„ç”·æœ‹å‹",
        "è¬è¬ä½ é¸æ“‡äº†æˆ‘",
        "2026 é‚„è¦ç¹¼çºŒçµ¦ä½ å®‰å…¨æ„Ÿ",
        "è€å©†ï¼Œ2026 ä¹Ÿè¦è¢«æˆ‘å¯µå£",
        "2026 ç¹¼çºŒè®“ä½ ç•¶æˆ‘å¥³ç‹",
        "è¬è¬ä½ è®“æˆ‘æ“æœ‰é€™éº¼æ£’çš„å®¶",
        "2026 ç¹¼çºŒæ„›ä½ åˆ°ä¸–ç•Œç›¡é ­",
        "è€å©†ï¼Œ2026 èƒ½ä¸èƒ½æŠŠã€éš¨ä¾¿ã€å¾äººç”Ÿå­—å…¸è£¡åˆªé™¤"
      ],
      bestie: [
        "2026 ä¹Ÿè¦ä¸€èµ·è®Šç¾è®Šæœ‰éŒ¢",
        "é–¨èœœï¼Œ2026 ä¹Ÿè¦ä¸€èµ·ç†¬å¤œèŠå¤©",
        "2026 ç¹¼çºŒç•¶æˆ‘ä¸€è¼©å­çš„å§å¦¹",
        "è¬è¬ä½ é™ªæˆ‘èµ°éæ‰€æœ‰ä½æ½®",
        "2026 ä¹Ÿè¦ä¸€èµ·è²·å£ç´…è²·åˆ°æ‰‹è»Ÿ",
        "é–¨èœœï¼Œ2026 ä¹Ÿè¦ä¸€èµ·ç˜‹ä¸€èµ·å—¨",
        "2026 æˆ‘å€‘çš„å‹æƒ…è¦ä¸€è·¯é£†åˆ°å®‡å®™",
        "æ–°çš„ä¸€å¹´ï¼Œå¦³å…ˆå¯Œï¼Œæˆ‘å…ˆè·Ÿ",
        "2026 é¡˜æˆ‘å€‘éƒ½ä¸å§”å±ˆè‡ªå·±ã€åªå§”å±ˆåˆ¥äºº",
        "è·¨å¹´ä¸ä¸€å®šè¦æœ‰äººå‘Šç™½ï¼Œä½†ä¸€å®šè¦æœ‰å¦³åœ¨",
        "2026 ä¾ç„¶æ˜¯ï¼šå¦³ä¸€é€šé›»è©±æˆ‘å°±å‡ºé–€",
        "æ–°å¹´å¿«æ¨‚ï¼å…ˆç¥å¦³æš´å¯Œï¼Œå†ç¥å¦³æ¡ƒèŠ±çˆ†æ£š"
      ],
      buddy: [
        "2026 ä¹Ÿè¦ä¸€èµ·æ‰“éŠæˆ²åˆ°å¤©äº®",
        "å…„å¼Ÿï¼Œ2026 ä¹Ÿè¦ä¸€èµ·å–é…’å¹ç‰›",
        "2026 ç¹¼çºŒç•¶æˆ‘ä¸€è¼©å­çš„æ­»é»¨",
        "è¬è¬ä½ é™ªæˆ‘èµ°éæ‰€æœ‰ç˜‹ç‹‚",
        "2026 ä¹Ÿè¦ä¸€èµ·è®Šæœ‰éŒ¢",
        "å…„å¼Ÿï¼Œ2026 ä¹Ÿè¦ä¸€èµ·æ‰›äº‹",
        "2026 æˆ‘å€‘ä¸€èµ·å‡ç´šæ‰“æ€ªï¼Œè£å‚™å…¨æ»¿",
        "æ–°çš„ä¸€å¹´ï¼Œç¹¼çºŒä¸¦è‚©ä½œæˆ°",
        "2026 åˆ¥å¿˜äº†ï¼šæœ‰äº‹å…ˆæ‰¾æˆ‘ï¼Œæ²’äº‹ä¹Ÿæ‰¾æˆ‘",
        "æ–°å¹´å¿«æ¨‚ï¼Œè©²å–å°±å–ï¼Œè©²è¡å°±è¡",
        "2026 é¡˜ä½ ä¸ç¼ºé…’å±€ï¼Œä¹Ÿä¸ç¼ºå¥½å…„å¼Ÿ",
        "è·¨å¹´ä¸è¨±å¤±è¯ï¼Œæ˜å¹´ç¹¼çºŒå—¨"
      ],
      colleague: [
        "2026 ç¹¼çºŒä¸€èµ·æ¬ç£šä½†åˆ¥æ¬åˆ°è…°",
        "æ–°å¹´å¿«æ¨‚ï¼Œ2026 åˆ¥å†è¢«è€é—†é»å",
        "2026 å¸Œæœ›æˆ‘å€‘éƒ½å‡è·åŠ è–ª",
        "è¬è¬ä½ ä»Šå¹´å¹«æˆ‘æ“‹äº†é‚£éº¼å¤šåˆ€",
        "2026 ç¹¼çºŒç•¶æˆ‘æœ€å¯é çš„æˆ°å‹",
        "æ–°å¹´å¿«æ¨‚ï¼Œ2026 åˆ¥å†åŠ ç­",
        "2026 ç¥ä½  KPI å…¨éï¼Œæœƒè­°å°‘ä¸€åŠ",
        "æ–°å¹´å¿«æ¨‚ï¼é¡˜ä½ çš„ä¿¡ç®±æ°¸é ä¸çˆ†ç‚¸",
        "2026 é¡˜æˆ‘å€‘éƒ½é‡åˆ°æ›´æ­£å¸¸çš„å°ˆæ¡ˆ",
        "è¬è¬ä½ è®“è·å ´æ²’é‚£éº¼é›£ç†¬",
        "2026 é¡˜ä½ é€±äº”æ°¸é æº–æ™‚ä¸‹ç­",
        "æ–°çš„ä¸€å¹´ï¼Œä¸€èµ·æŠŠé›·äº‹è®Šå°äº‹"
      ],
      boss: [
        "2026 ç¹¼çºŒå¸¶æˆ‘å€‘é£›å§è€å¤§",
        "è€é—†æ–°å¹´å¿«æ¨‚ï¼Œ2026 å¤šç™¼çé‡‘",
        "2026 å¸Œæœ›è·Ÿè‘—æ‚¨ç¹¼çºŒè³ºå¤§éŒ¢",
        "è¬è¬æ‚¨ä»Šå¹´çµ¦æˆ‘å€‘é€™éº¼å¤šæ©Ÿæœƒ",
        "è€é—†ï¼Œ2026 ä¹Ÿè¦è¢«æ‚¨ç…§é¡§",
        "æ–°å¹´å¿«æ¨‚ï¼Œ2026 å¤šæ”¾å‡å§",
        "2026 ç¥å…¬å¸æ›´æ—ºã€æ‚¨æ›´å¼·ã€æˆ‘å€‘æ›´çˆ½",
        "æ–°çš„ä¸€å¹´ï¼Œé¡˜æ‚¨æ±ºç­–éƒ½ç¥æº–ã€å¹´çµ‚éƒ½å¤§æ–¹",
        "2026 å¸Œæœ›æˆ‘å€‘åŠ ç­æœ‰åŠ éŒ¢ï¼Œå°ˆæ¡ˆéƒ½é †åˆ©",
        "æ–°å¹´å¿«æ¨‚ï¼é¡˜æ‚¨çš„æœƒè­°éƒ½æº–æ™‚çµæŸ",
        "2026 ç¥æ‚¨ä¸€è·¯å‡ç´šï¼Œå¸¶æˆ‘å€‘ä¸€èµ·èººè´",
        "è€é—†æ–°å¹´å¿«æ¨‚ï¼Œé¡˜æ‚¨å£“åŠ›å°ã€çé‡‘å¤§"
      ],
      parents: [
        "çˆ¸åª½ï¼Œ2026 ä¹Ÿè¦è¢«æˆ‘å­é †",
        "æ–°å¹´å¿«æ¨‚ï¼Œè¬è¬ä½ å€‘é¤Šæˆ‘é€™éº¼å¤§",
        "2026 è®“æˆ‘å¤šè³ºéŒ¢çµ¦ä½ å€‘èŠ±",
        "çˆ¸åª½ï¼Œ2026 ä¹Ÿè¦è¢«æˆ‘å¯µ",
        "è¬è¬ä½ å€‘è®“æˆ‘æˆç‚ºç¾åœ¨çš„æˆ‘",
        "2026 å¸¶ä½ å€‘å»æ—…è¡Œ",
        "æ–°çš„ä¸€å¹´ï¼Œé¡˜ä½ å€‘å¥åº·å¹³å®‰ã€æ¯å¤©éƒ½é–‹å¿ƒ",
        "2026 æˆ‘æœƒæ›´åŠªåŠ›ï¼Œè®“ä½ å€‘æ›´æ”¾å¿ƒ",
        "è¬è¬ä½ å€‘ä¸€ç›´åœ¨ï¼Œæˆ‘æ„›ä½ å€‘",
        "2026 ç¥ä½ å€‘ç¡å¾—å¥½ã€åƒå¾—é¦™ã€ç¬‘å¾—å¤š",
        "æ–°å¹´å¿«æ¨‚ï¼é¡˜æˆ‘å€‘ä¸€å®¶äººéƒ½å¹³å®‰é †åˆ©",
        "2026 æˆ‘å¸Œæœ›ä½ å€‘å°‘æ“å¿ƒï¼Œå¤šäº«ç¦"
      ],
      enemy: [
        "2026 å¸Œæœ›ä½ æ¯”æˆ‘æ…˜ä¸€é»",
        "æ–°å¹´å¿«æ¨‚ï¼Œåˆ¥æ¯”æˆ‘å…ˆè„«å–®",
        "2026 å¸Œæœ›ä½ è³ºçš„æ¯”æˆ‘å°‘ä¸€é»",
        "æ­å–œä½ åˆè€ä¸€æ­²",
        "2026 å¸Œæœ›ä½ ç¹¼çºŒç•¶æˆ‘çš„é™ªè¥¯",
        "æ–°å¹´å¿«æ¨‚ï¼Œåˆ¥æ¯”æˆ‘å…ˆå‡è·",
        "2026 é¡˜ä½ æ¯å¤©éƒ½é‡åˆ°ä½ æœ€è¨å­çš„åŒäº‹",
        "æ–°çš„ä¸€å¹´ï¼Œç¥ä½ å¿™åˆ°æ²’ç©ºç®¡æˆ‘",
        "2026 ç¥ä½ ç™¼ç¦ï¼ˆä¸æ˜¯ç™¼ç¦æ°£é‚£ç¨®ï¼‰",
        "æ–°å¹´å¿«æ¨‚ï¼é¡˜ä½ æ‰€æœ‰è¨ˆç•«éƒ½è¦æ’éšŠ",
        "2026 é¡˜ä½ ä¸€é‚ŠåŠªåŠ›ä¸€é‚Šç ´é˜²",
        "ç¥ä½ é †åˆ©ï¼Œä½†ä¸è¦å¤ªé †åˆ©"
      ],
      eng_quotes: [
        "Cheers to 2026 â€“ may it be our best yet",
        "New Year, new wins",
        "2026: Letâ€™s make it iconic",
        "Happy New Year â€“ hereâ€™s to health, wealth, and happiness",
        "2026, please be kind",
        "Wishing you a year full of breakthroughs",
        "New year. New energy. Same awesome you",
        "May your 2026 be bold and beautiful",
        "To new adventures in 2026",
        "Letâ€™s turn dreams into plans in 2026"
      ],
      random: [
        "2026 é¡˜ä½ æš´å¯Œåˆè„«å–®",
        "æ–°å¹´å¿«æ¨‚ï¼ŒéŒ¢åŒ…é¼“é¼“æ„›æƒ…æ»¿æ»¿",
        "2026 ç‰›è½‰ä¹¾å¤",
        "2026 é¡˜ä½ æ‰€é¡˜çš†æ‰€å¾—",
        "æ–°å¹´å¿«æ¨‚ï¼Œè¬äº‹å¦‚æ„",
        "2026 è²¡é‹äº¨é€šæ„›æƒ…é †åˆ©",
        "2026 é¡˜ä½ æ¯å¤©éƒ½è¢«å¥½æ¶ˆæ¯è¿½è‘—è·‘",
        "æ–°å¹´å¿«æ¨‚ï¼é¡˜ä½ ä»Šå¤©é–‹å§‹ä¸€è·¯é–‹æ›",
        "2026 é¡˜ä½ ç¬‘å£å¸¸é–‹ï¼Œç…©æƒ±é€€æ•£",
        "2026 é¡˜ä½ å¥åº·ã€é †åˆ©ã€å¿ƒæƒ³äº‹æˆ"
      ]
    };

    function getQuote(id) {
      const list = quotesData[id] || quotesData.random;
      return list[Math.floor(Math.random() * list.length)];
    }

    let currentRole = '';
    let chargeTimer = null;
    let progress = 0;
    let isCompleting = false;

    const chargeCircle = document.getElementById('charge-circle');
    const chargeView = document.getElementById('charge-view');
    const appBg = document.getElementById('app-background');

    // âœ… Netlifyï¼šåˆ†äº«ç¶²ç«™ç”¨çš„ä¹¾æ·¨ URLï¼ˆåªåˆ†äº«é€£çµï¼Œä¸å¸¶çµæœï¼‰
    const siteUrl = 'https://boom.sppfoundry.co/';

    const grid = document.getElementById('role-grid');
    let lastSelectedTile = null;

    function clearSelectedTile() {
      if (lastSelectedTile) lastSelectedTile.classList.remove('is-selected');
      lastSelectedTile = null;
    }

    function enterChargeView(role) {
      currentRole = role;
      document.getElementById('home-view').style.display = 'none';

      // æ–°å¢ï¼šéš±è— Footer å’Œ SEO å€å¡Šï¼Œè®“ç•«é¢æ›´ä¹¾æ·¨
      document.querySelector('.spp-footer').style.display = 'none';
      document.querySelector('.seo-faq').style.display = 'none';

      chargeView.style.display = 'flex';
      progress = 0;
      isCompleting = false;
      chargeCircle.style.setProperty('--progress', '0%');
    }

    grid.addEventListener('click', (e) => {
      const tile = e.target.closest('.grid-item');
      if (!tile) return;

      const role = tile.getAttribute('data-role');
      if (!role) return;

      // âœ… GAï¼šè¨˜éŒ„ 12 å®®æ ¼é»æ“Š
      gaEvent('select_role', {
        role_id: role,
        role_name: roleNameMap[role] || role
      });

      clearSelectedTile();
      tile.classList.add('is-selected');
      lastSelectedTile = tile;

      setTimeout(() => {
        clearSelectedTile();
        enterChargeView(role);
      }, 260);
    });

    function startCharge(e) {
      if (e) e.preventDefault();
      if (chargeTimer || isCompleting) return;

      chargeTimer = setInterval(() => {
        progress += 3;
        if (progress > 100) progress = 100;
        chargeCircle.style.setProperty('--progress', `${progress}%`);
        chargeView.classList.add('shaking');

        if (navigator.vibrate) navigator.vibrate(30);

        if (progress >= 100) {
          completeCharge();
        }
      }, 30);
    }

    function stopCharge() {
      if (chargeTimer) {
        clearInterval(chargeTimer);
        chargeTimer = null;
      }
      chargeView.classList.remove('shaking');
      if (progress < 100 && !isCompleting) {
        progress = 0;
        chargeCircle.style.setProperty('--progress', '0%');
      }
    }

    chargeView.addEventListener('pointerdown', startCharge, { passive: false });
    chargeView.addEventListener('pointerup', stopCharge);
    chargeView.addEventListener('pointercancel', stopCharge);
    chargeView.addEventListener('pointerleave', stopCharge);

    function completeCharge() {
      if (isCompleting) return;
      isCompleting = true;

      if (chargeTimer) {
        clearInterval(chargeTimer);
        chargeTimer = null;
      }
      chargeView.classList.remove('shaking');

      // âœ… GAï¼šæŠ½åˆ°ç¥ç¦ï¼ˆå®Œæˆé•·æŒ‰ï¼‰
      gaEvent('generate_quote', currentRolePayload());

      const flash = document.getElementById('flash-bang');
      flash.style.opacity = 0.65;
      setTimeout(() => { flash.style.opacity = 0; }, 120);
      setTimeout(() => { flash.style.opacity = 0; }, 400);

      const bgFile = bgMap[currentRole] || 'boom_bk.png';
      const newBgUrl = `./${bgFile}`;

      const tempImg = new Image();
      tempImg.onload = () => {
        confetti({ particleCount: 180, spread: 100, origin: { y: 0.6 } });

        appBg.style.backgroundImage = `url('${newBgUrl}')`;
        document.getElementById('capture-target').style.backgroundImage = `url('${newBgUrl}')`;

        document.getElementById('result-text').innerText = getQuote(currentRole);
        document.getElementById('role-label').innerText = roleNameMap[currentRole] || 'TO YOU';

        chargeView.style.display = 'none';
        document.getElementById('result-modal').style.display = 'flex';
      };

      tempImg.onerror = () => {
        document.getElementById('result-text').innerText = getQuote(currentRole);
        document.getElementById('role-label').innerText = roleNameMap[currentRole] || 'TO YOU';
        chargeView.style.display = 'none';
        document.getElementById('result-modal').style.display = 'flex';
      };

      tempImg.src = newBgUrl;
    }

    function resetApp() {
      // âœ… GAï¼šå†æŠ½ä¸€å¼µ
      gaEvent('restart', currentRolePayload());

      document.getElementById('result-modal').style.display = 'none';
      document.getElementById('home-view').style.display = 'flex';

      // æ¢å¾©é¡¯ç¤º Footer å’Œ SEO
      document.querySelector('.spp-footer').style.display = 'block';
      document.querySelector('.seo-faq').style.display = 'block';

      appBg.style.backgroundImage = "url('./boom_bk.png')";
      clearSelectedTile();
      stopCharge();
      isCompleting = false;
      closeMore();
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.innerText = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    // =========================
    // More sheet controls
    // =========================
    function openMore() {
      document.getElementById('more-backdrop').style.display = 'block';
      document.getElementById('more-sheet').style.display = 'block';
    }
    function closeMore() {
      document.getElementById('more-backdrop').style.display = 'none';
      document.getElementById('more-sheet').style.display = 'none';
    }

    // =========================
    // Share helpers
    // =========================
    function copyText() {
      const text = document.getElementById('result-text').innerText;

      // âœ… GAï¼šè¤‡è£½æ–‡å­—
      gaEvent('copy_text', currentRolePayload({ content_type: 'text' }));

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(() => {
          showToast("âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
        }).catch(() => {
          const ok = fallbackCopyTextToClipboard(text);
          if (ok) showToast("âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
          else alert("ç€è¦½å™¨é™åˆ¶ï¼Œè«‹æ‰‹å‹•è¤‡è£½æ–‡å­—ã€‚");
        });
        return;
      }

      const ok = fallbackCopyTextToClipboard(text);
      if (ok) showToast("âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿");
      else alert("ç€è¦½å™¨é™åˆ¶ï¼Œè«‹æ‰‹å‹•è¤‡è£½æ–‡å­—ã€‚");
    }

    // åˆ†äº«æ–‡å­—ï¼ˆä¹¾æ·¨ç‰ˆï¼šä¸å¸¶ç¶²å€ï¼‰
    function shareText() {
      const text = document.getElementById('result-text').innerText;

      // âœ… GAï¼šåˆ†äº«æ–‡å­—ï¼ˆä¹¾æ·¨ï¼‰
      gaEvent('share_text', currentRolePayload({
        method: (navigator.share ? 'native' : 'fallback'),
        content_type: 'text',
        has_url: false
      }));

      if (navigator.share) {
        navigator.share({
          title: 'BOOM! 2026 ç¥ç¦ç”¢ç”Ÿå™¨',
          text: text
        }).catch(() => { });
      } else if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
          showToast("âœ… å·²è¤‡è£½ç¥ç¦æ–‡å­—ï¼Œè²¼åˆ°ä»»ä½•ç¤¾ç¾¤å°±èƒ½åˆ†äº«");
        }).catch(() => {
          const ok = fallbackCopyTextToClipboard(text);
          if (ok) showToast("âœ… å·²è¤‡è£½ç¥ç¦æ–‡å­—ï¼Œè²¼åˆ°ä»»ä½•ç¤¾ç¾¤å°±èƒ½åˆ†äº«");
          else alert("è«‹æ‰‹å‹•è¤‡è£½ä»¥ä¸‹å…§å®¹ï¼š\n\n" + text);
        });
      } else {
        alert("è«‹æ‰‹å‹•è¤‡è£½ä»¥ä¸‹å…§å®¹ï¼š\n\n" + text);
      }
    }

    // åˆ†äº«ç¶²ç«™ï¼ˆåªåˆ†äº«é€£çµï¼Œä¸å¸¶çµæœï¼‰â€” å°æµå…¥å£
    function shareLink() {
      closeMore();

      // âœ… GAï¼šåˆ†äº«ç¶²ç«™
      gaEvent('share_link', currentRolePayload({
        method: (navigator.share ? 'native' : 'fallback'),
        content_type: 'link'
      }));

      if (navigator.share) {
        navigator.share({
          title: 'BOOM! 2026 ç¥ç¦ç”¢ç”Ÿå™¨',
          url: siteUrl
        }).catch(() => { });
      } else if (navigator.clipboard) {
        navigator.clipboard.writeText(siteUrl).then(() => {
          showToast("âœ… å·²è¤‡è£½ç¶²ç«™é€£çµ");
        }).catch(() => {
          const ok = fallbackCopyTextToClipboard(siteUrl);
          if (ok) showToast("âœ… å·²è¤‡è£½ç¶²ç«™é€£çµ");
          else alert("è«‹æ‰‹å‹•è¤‡è£½é€£çµï¼š\n" + siteUrl);
        });
      } else {
        alert("è«‹æ‰‹å‹•è¤‡è£½é€£çµï¼š\n" + siteUrl);
      }
    }

    // ç”¢ç”Ÿåœ–ç‰‡ Blobï¼ˆçµ¦åˆ†äº«åœ–ç‰‡ & ä¸‹è¼‰é‡ç”¨ï¼‰
    async function buildPngBlob() {
      const element = document.getElementById('capture-target');

      // âœ… ä¿®ç™½è§’ï¼šè¼¸å‡ºä¸é€æ˜èƒŒæ™¯ï¼Œé¿å… PNG é€æ˜è§’åœ¨ LINE é¡¯ç¤ºéœ²ç™½
      const canvas = await html2canvas(element, {
        backgroundColor: '#2b0030',
        scale: 3,
        logging: false,
        useCORS: true
      });

      return new Promise((resolve) => canvas.toBlob(resolve, 'image/png'));
    }

    function canShareFilesSafely(file) {
      try {
        return !!navigator.share && !!navigator.canShare && navigator.canShare({ files: [file] });
      } catch (e) {
        return false;
      }
    }

    // åˆ†äº«åœ–ç‰‡ï¼ˆå„ªå…ˆï¼‰ï¼šWeb Share Level 2ï¼ˆfilesï¼‰
    async function shareImage() {
      closeMore();

      // âœ… GAï¼šåˆ†äº«åœ–ç‰‡ï¼ˆæ„åœ–ï¼‰
      gaEvent('share_image', currentRolePayload({
        method: 'attempt',
        content_type: 'image'
      }));

      let blob;
      try {
        blob = await buildPngBlob();
      } catch (e) {
        showToast("âš ï¸ ç”¢ç”Ÿåœ–ç‰‡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
        return;
      }

      if (!blob) {
        showToast("âš ï¸ ç”¢ç”Ÿåœ–ç‰‡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
        return;
      }

      const fileName = `boom_2026_${currentRole || 'card'}.png`;
      const file = new File([blob], fileName, { type: 'image/png' });

      const canNativeShareFiles = canShareFilesSafely(file);

      // âœ… GAï¼šåˆ†äº«åœ–ç‰‡ï¼ˆèƒ½åŠ›åˆ¤æ–·çµæœï¼‰
      gaEvent('share_image', currentRolePayload({
        method: canNativeShareFiles ? 'native_files' : 'fallback_save',
        content_type: 'image'
      }));

      if (canNativeShareFiles) {
        try {
          // âœ… åªåˆ†äº«åœ–ç‰‡ï¼Œä¸å¤¾å¸¶æ–‡å­—/é€£çµ
          await navigator.share({
            title: 'BOOM! 2026 ç¥ç¦å¡',
            files: [file]
          });
        } catch (e) {
          // ä½¿ç”¨è€…å–æ¶ˆä¸æç¤º
        }
        return;
      }

      // fallbackï¼šæ”¹ç‚ºå„²å­˜åœ–ç‰‡ï¼ˆä¸å¤±èƒ½ï¼‰
      showToast("æ­¤ç€è¦½å™¨ä¸æ”¯æ´ç›´æ¥åˆ†äº«åœ–ç‰‡ï¼Œå·²æ”¹ç‚ºå„²å­˜åœ–ç‰‡");
      saveImageFromBlob(blob, { source: 'share_image_fallback' });
    }

    // æ›´å¤šå…§ï¼šLINE æ–‡å­—åˆ†äº«ï¼ˆç¥ç¦ï¼‹ç¶²å€ï¼‰
    function shareLineText() {
      closeMore();

      // âœ… GAï¼šLINE æ–‡å­—åˆ†äº«
      gaEvent('line_share_text', currentRolePayload({
        method: 'line_url',
        content_type: 'text',
        has_url: true
      }));

      const text = document.getElementById('result-text').innerText;
      const msg = text + "\n\n" + siteUrl;
      window.location.href = `https://line.me/R/msg/text/?${encodeURIComponent(msg)}`;
    }

    // å…§éƒ¨ï¼šçœŸæ­£åšä¸‹è¼‰å„²å­˜
    function saveBlobToFile(blob) {
      const link = document.createElement('a');
      link.download = `boom_2026_${currentRole || 'card'}.png`;
      link.href = URL.createObjectURL(blob);
      link.click();
      setTimeout(() => URL.revokeObjectURL(link.href), 1500);
    }

    // ä¾›åˆ†äº«åœ–ç‰‡ fallback ä½¿ç”¨
    function saveImageFromBlob(blob, meta = {}) {
      // âœ… GAï¼šå„²å­˜åœ–ç‰‡ï¼ˆåŒ…å« share fallbackï¼‰
      gaEvent('save_image', currentRolePayload({
        content_type: 'image',
        source: meta.source || 'unknown'
      }));
      saveBlobToFile(blob);
    }

    // ä¸‹è¼‰åœ–ç‰‡ï¼šæ›´å¤šå…§çš„ä¸»å…¥å£
    function downloadImage() {
      closeMore();

      // âœ… GAï¼šå„²å­˜åœ–ç‰‡ï¼ˆæ›´å¤šé¸å–®ï¼‰
      gaEvent('save_image', currentRolePayload({
        content_type: 'image',
        source: 'more_menu'
      }));

      buildPngBlob().then(blob => {
        if (!blob) {
          showToast("âš ï¸ ç”¢ç”Ÿåœ–ç‰‡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
          return;
        }
        saveBlobToFile(blob);
      }).catch(() => {
        showToast("âš ï¸ ç”¢ç”Ÿåœ–ç‰‡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
      });
    }
  </script>
</body>

</html>